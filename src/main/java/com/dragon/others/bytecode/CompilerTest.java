package com.dragon.others.bytecode;

/**
 * Created by huangzhibo on 23/03/2017.
 */
public class CompilerTest {
//    public static void main(String[] args) throws Exception{
//
//        String source = "public class Main { " +
//                "public static void main(String[] args) {System.out.println(\"Hello World!\");} }";
//
//        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
//
//        StandardJavaFileManager fileManager = compiler.getStandardFileManager(null,null,null);
//
//        StringSourceJavaObject
//    }

//    private static double calculate(String expr) throws CalculationException {
//
//        String className = "CalculatorMain";
//        String methodName = "calculate";
//        String source = "public class " + className
//
//                + " { public static double " + methodName + "() { return " + expr
//
//                + "; } }";
//        boolean result = task.call();
//
//        if (result) {
//
//            ClassLoader loader = Calculator.class.getClassLoader();
//
//            try {
//
//                Class<?> clazz = loader.loadClass(className);
//
//                Method method = clazz.getMethod(methodName, new Class<?>[] {});
//
//                Object value = method.invoke(null, new Object[] {});
//
//                return (Double) value;
//
//            } catch (Exception e) {
//
//                throw new CalculationException("内部错误。");
//
//            }
//
//        } else {
//
//            throw new CalculationException("错误的表达式。");
//
//        }
//    }

}
